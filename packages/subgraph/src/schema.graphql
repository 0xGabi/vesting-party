type OfferFactory @entity {
  id: ID!
  address: Bytes!
  count: Int!
  offers: [Offer!] @derivedFrom(field: "factory")
}

type Offer @entity {
  id: ID!
  address: Bytes!
  createdAt: BigInt!
  factory: OfferFactory!
  name: String!
  symbol: String!
  token: ERC20!
  merkleRoot: Bytes!
  endAt: BigInt!
  upfrontPct: BigInt!
  vestingPeriod: BigInt!
  vestingDurationInPeriods: Int!
  vestingCliffInPeriods: Int!
  vestings: [Vesting!] @derivedFrom(field: "offer")
}

type Vesting @entity {
  id: ID!
  tokenId: BigInt!
  offer: Offer!
  startTime: BigInt!
  beneficiary: Bytes!
  amount: BigInt!
  periodsClaimed: Int!
  amountClaimed: BigInt!
  claims: [Claim!] @derivedFrom(field: "vesting")
}

type Claim @entity {
  id: ID!
  vesting: Vesting!
  createdAt: BigInt!
  beneficiary: Bytes!
  amount: BigInt!
}

type ERC20 @entity {
  id: ID!
  name: String!
  symbol: String!
  decimals: Int!
}
